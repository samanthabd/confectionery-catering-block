{"version":3,"file":"block/view.js","mappings":"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","sources":["webpack://catering-package/./src/block/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n/* eslint-disable no-console */\nclass RevealOnScroll {\n  constructor(els, thresholdPercent) {\n    this.thresholdPercent = thresholdPercent\n    this.itemsToReveal = els\n    this.browserHeight = window.innerHeight\n    this.scrollThrottle = this.throttle(this.calcCaller, 100).bind(this)\n    this.processChange = this.debounce(() => this.saveInput());\n    this.hideInitially()\n    this.events()\n  }\n\n  events() {\n    window.addEventListener(\"scroll\", this.scrollThrottle);\n    window.addEventListener(\"resize\", debounce(() => {\n      console.log(\"Resize just ran\")\n      this.browserHeight = window.innerHeight\n    }, 333))\n  }\n\n  calcCaller() {\n    console.log(\"Scroll funcion ran\")\n    this.itemsToReveal.forEach(el => {\n      if (el.isRevealed == false) {\n        this.calculateIfScrolledTo(el)\n      }\n    })\n  }\n\n  calculateIfScrolledTo(el) {\n    if ((window.scrollY + this.browserHeight) > el.offsetTop) {\n      console.log(\"element was calculated\");\n      let scrollPercent = (el.getBoundingClientRect().top / this.browserHeight) * 100;\n      if (scrollPercent < this.thresholdPercent) {\n        el.classList.add(\"reveal-item--is-visible\")\n        el.isRevealed = true\n        if (el.isLastItem) {\n          window.removeEventListener(\"scroll\", this.scrollThrottle)\n        }\n      }\n\n    }\n  }\n\n  hideInitially() {\n    this.itemsToReveal.forEach(el => {\n      el.classList.add(\"reveal-item\")\n      el.isRevealed = false;\n    })\n    this.itemsToReveal[this.itemsToReveal.length - 1].isLastItem = true;\n  }\n\n  debounce(func, timeout = 300){\n    let timer;\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => { func.apply(this, args); }, timeout);\n    };\n  }\n  saveInput(){\n    console.log('Saving data');\n  }\n\n  throttle (callback, limit) {\n    var waiting = false;                      // Initially, we're not waiting\n    return function () {                      // We return a throttled function\n        if (!waiting) {                       // If we're not waiting\n            callback.apply(this, arguments);  // Execute users function\n            waiting = true;                   // Prevent future invocations\n            setTimeout(function () {          // After a period of time\n                waiting = false;              // And allow future invocations\n            }, limit);\n        }\n    }\n}\n}\n\ntry {\n  new RevealOnScroll(document.querySelectorAll(\".catering-package\"), 90);\n} catch(err) {\n  console.log(err)\n}\n/* eslint-enable no-console */\n"],"names":["RevealOnScroll","constructor","els","thresholdPercent","itemsToReveal","browserHeight","window","innerHeight","scrollThrottle","throttle","calcCaller","bind","processChange","debounce","saveInput","hideInitially","events","addEventListener","console","log","forEach","el","isRevealed","calculateIfScrolledTo","scrollY","offsetTop","scrollPercent","getBoundingClientRect","top","classList","add","isLastItem","removeEventListener","length","func","timeout","timer","args","clearTimeout","setTimeout","apply","callback","limit","waiting","arguments","document","querySelectorAll","err"],"sourceRoot":""}